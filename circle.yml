machine:
  timezone: Europe/Vienna
  java:
    version: openjdk8
  services:
  - docker
  environment:
    DB_NAME: executive
    DB_USER: root
    DB_PASSWORD: root
    EXECUTIVE_DATASOURCE_URL: jdbc:postgresql://localhost:5432/$DB_NAME
    EXECUTIVE_DATASOURCE_USERNAME: $DB_USER
    EXECUTIVE_DATASOURCE_PASSWORD: $DB_PASSWORD
  pre:
  #- DEBIAN_FRONTEND=noninteractive sudo apt-get --purge autoremove -y postgresql
dependencies:
  pre:
    #- sudo service postgresql stop
test:
  pre:
  #- docker run --name test-postgres -d -p 5432:5432 -e POSTGRES_USER=$DB_USER -e POSTGRES_PASSWORD=$DB_PASSWORD -e POSTGRES_DB=$DB_NAME postgres
  override:
    - mvn test -f discoveryserver/pom.xml
    - mvn test -f configserver/pom.xml
    - mvn test -f adminui/pom.xml
    - mvn test -f microservicesdashboard/pom.xml
    - mvn test -f menu/pom.xml
    - mvn test -f cook/pom.xml
    - mvn test -f waiter/pom.xml